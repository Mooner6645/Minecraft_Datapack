import math

frames = 300         # number of frames per full rotation
points = 100        # points per heart
rotations = 3       # how many times it spins per frame
scale = 0.1         # size of the heart
height_offset = 10   # lift above player/ground

with open("heart.mcfunction", "w") as file:
    for f in range(frames):
        base_angle = f * (2 * math.pi / frames)
        
        for r in range(rotations):
            angle = base_angle + r * (2 * math.pi / (frames * rotations))
            
            for i in range(points):
                t = (i / points) * 2 * math.pi
                
                # Heart parametric equations
                x = 16 * math.sin(t)**3
                y = 13 * math.cos(t) - 5 * math.cos(2*t) - 2 * math.cos(3*t) - math.cos(4*t)
                z = 0  # initial flat
                
                # Rotate around Y-axis
                x_rot = x * math.cos(angle) - z * math.sin(angle)
                z_rot = x * math.sin(angle) + z * math.cos(angle)
                
                # Scale and lift
                x_mc = x_rot * scale
                y_mc = y * scale + height_offset
                z_mc = z_rot * scale
                
                # Particle command
                file.write(f"particle minecraft:end_rod ~{x_mc:.3f} ~{y_mc:.3f} ~{z_mc:.3f} 0 0 0 0 1\n")